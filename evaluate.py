# This will be my Model Evaluation Module for my Social Vulnerability Project

import pandas as pd
import numpy as np

########################### Explore Imports ####################################
from sklearn.model_selection import train_test_split
import matplotlib.pyplot as plt
import seaborn as sns
from scipy.stats import pearsonr, spearmanr

def plot_residuals(actual, predicted):
    residuals = actual - predicted
    plt.hlines(0, actual.min(), actual.max(), ls=':')
    plt.scatter(actual, residuals)
    plt.ylabel('residual ($y - \hat{y}$)')
    plt.xlabel('actual value ($y$)')
    plt.title('Actual vs Residual')
    return plt.gca()

def all_residuals(df, target):
    col_list = list(df.drop(columns=(target)))
    
    for col in col_list:
        print(f'{col}')
        residuals = df[target] - df[col]
        plt.hlines(0, df[target].min(), df[target].max(), ls=':')
        plt.scatter(df[target], residuals)
        plt.ylabel('residual ($y - \hat{y}$)')
        plt.xlabel('actual value ($y$)')
        plt.title('Actual Turnout vs Predicted Residuals')
        plt.show()
        print('----------------------------------------------------------------')
    